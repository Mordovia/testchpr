<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width,user-scalable=no" />
        <title>html5 page</title>
    </head>

    <body>
   
    <script>
    document.write('Переделать всё!');
    </script>
    <script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
        <script type="text/javascript"> 
var user = {
name : 'none',
avatar : '',
loaded : false
};
           
  var getUserName = function () {//описываем функцию, которая обращается к API
  VK.api('users.get', {"fields" : "photo_50"}, function (data) {//метод users.get - это тоже функция, которая выводит что-то %(
console.log(data);
user['name'] = data.response[0].first_name;//обратились к ВК API - получили ответ, который записали в параметр name переменной user
user['avatar'] = data.response[0].photo_50;//обратились к ВК API - получили ответ, который записали в параметр avatar переменной user
//	  document.write ("Hi, " + user['name']);
})};          
  var status = false;
  VK.init(function() { //с этого мы начинаем работу с ВКонтакте API
      status = true; //меняем состояние переменной
      getUserName();//это наша функция, которая обращается к API
console.log('VK is inited'); 
  }, function() { //если произошла ошибка инициализации
     console.log('error'); 
}, '5.63'); //версия API
/*  var flag = 0;
  function changeImage() {
    if (flag == 0) {
      document.img.src = '/testchpr/res/teacup.png';
      flag = 1;
    }
    else {
      document.img.src = user['avatar'];
      flag = 0;
    }
  }*/
  document.img.src = user['avatar'];          
</script>
<img name = 'img' src = "" />
<form>
<!-- <input type = 'button' value = 'Сменить изображение' onClick = 'changeImage()' />-->
</form>
    </body>

</html>
